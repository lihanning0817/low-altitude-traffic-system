/* 深色模式全局优化样式 */
/* Dark Mode Global Optimization Styles */

.dark {
  /* ==================== 全局基础样式 ==================== */

  /* 确保整个页面使用深色背景 */
  background-color: var(--bg-primary);
  color: var(--text-primary);

  /* 全局文本颜色 */
  * {
    color: inherit;
  }

  /* 标题颜色 */
  h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary);
  }

  /* 链接颜色 */
  a {
    color: var(--primary-color);
  }

  a:hover {
    color: var(--primary-hover);
  }

  /* 分割线 */
  hr {
    border-color: var(--border-color);
  }

  /* ==================== 布局组件 ==================== */

  /* 主容器 */
  .app-container,
  .main-container,
  .content-container {
    background-color: var(--bg-primary);
    color: var(--text-primary);
  }

  /* 页面内容区 */
  .page-content,
  .view-content {
    background-color: var(--bg-primary);
    color: var(--text-primary);
  }

  /* 侧边栏 */
  .sidebar,
  .app-sidebar,
  .navigation-sidebar {
    background-color: var(--sidebar-bg);
    border-color: var(--border-color);
  }

  .sidebar-item,
  .nav-item {
    color: var(--sidebar-text);
  }

  .sidebar-item:hover,
  .nav-item:hover {
    background-color: var(--sidebar-item-hover);
    color: var(--sidebar-item-active);
  }

  .sidebar-item.active,
  .nav-item.active {
    background-color: var(--sidebar-item-hover);
    color: var(--sidebar-item-active);
  }

  /* 头部导航 */
  .header,
  .app-header,
  .top-nav {
    background-color: var(--header-bg);
    border-color: var(--header-border);
    color: var(--header-text);
  }

  /* ==================== 卡片和面板 ==================== */

  /* 卡片 */
  .card,
  .panel,
  .box,
  .widget {
    background-color: var(--card-bg);
    border-color: var(--card-border);
    box-shadow: var(--card-shadow);
    color: var(--text-primary);
  }

  .card-header,
  .panel-header {
    background-color: var(--bg-secondary);
    border-color: var(--border-color);
    color: var(--text-primary);
  }

  .card-body,
  .panel-body {
    color: var(--text-primary);
  }

  .card-footer,
  .panel-footer {
    background-color: var(--bg-secondary);
    border-color: var(--border-color);
    color: var(--text-secondary);
  }

  /* ==================== 表单元素 ==================== */

  /* 输入框 */
  input[type="text"],
  input[type="password"],
  input[type="email"],
  input[type="number"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  textarea {
    background-color: var(--input-bg);
    border-color: var(--input-border);
    color: var(--text-primary);
  }

  input::placeholder,
  textarea::placeholder {
    color: var(--text-tertiary);
  }

  input:focus,
  textarea:focus {
    border-color: var(--input-focus);
    box-shadow: 0 0 0 2px rgba(10, 132, 255, 0.2);
  }

  /* 选择框 */
  select {
    background-color: var(--input-bg);
    border-color: var(--input-border);
    color: var(--text-primary);
  }

  option {
    background-color: var(--bg-card);
    color: var(--text-primary);
  }

  /* ==================== 按钮 ==================== */

  /* 主要按钮 */
  .btn-primary,
  button.primary {
    background-color: var(--btn-primary-bg);
    color: var(--btn-primary-text);
    border-color: var(--btn-primary-bg);
  }

  .btn-primary:hover,
  button.primary:hover {
    background-color: var(--btn-primary-hover);
    border-color: var(--btn-primary-hover);
  }

  /* 次要按钮 */
  .btn-secondary,
  button.secondary {
    background-color: var(--btn-secondary-bg);
    color: var(--btn-secondary-text);
    border-color: var(--border-color);
  }

  .btn-secondary:hover,
  button.secondary:hover {
    background-color: var(--btn-secondary-hover);
  }

  /* 默认按钮 */
  .btn,
  button {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--border-color);
  }

  .btn:hover,
  button:hover {
    background-color: var(--bg-tertiary);
  }

  /* ==================== 表格 ==================== */

  /* 表格容器 */
  .table-container,
  .data-table-wrapper {
    background-color: var(--bg-card);
    border-color: var(--border-color);
  }

  /* 表格 */
  table {
    background-color: var(--bg-card);
    color: var(--text-primary);
  }

  thead {
    background-color: var(--bg-secondary);
  }

  th {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--border-color);
  }

  td {
    border-color: var(--border-color);
    color: var(--text-primary);
  }

  tr:hover {
    background-color: var(--bg-secondary);
  }

  tbody tr:nth-child(even) {
    background-color: rgba(255, 255, 255, 0.02);
  }

  /* ==================== 列表 ==================== */

  /* 列表 */
  ul, ol {
    color: var(--text-primary);
  }

  li {
    color: var(--text-primary);
  }

  /* 列表项 */
  .list-item {
    background-color: var(--bg-card);
    border-color: var(--border-color);
    color: var(--text-primary);
  }

  .list-item:hover {
    background-color: var(--bg-secondary);
  }

  /* ==================== 模态框和弹窗 ==================== */

  /* 模态框遮罩 */
  .modal-mask,
  .overlay {
    background-color: var(--bg-overlay);
  }

  /* 模态框 */
  .modal,
  .dialog {
    background-color: var(--bg-card);
    border-color: var(--border-color);
    box-shadow: var(--shadow-lg);
  }

  .modal-header,
  .dialog-header {
    background-color: var(--bg-secondary);
    border-color: var(--border-color);
    color: var(--text-primary);
  }

  .modal-body,
  .dialog-body {
    color: var(--text-primary);
  }

  .modal-footer,
  .dialog-footer {
    background-color: var(--bg-secondary);
    border-color: var(--border-color);
  }

  /* ==================== 通知和提示 ==================== */

  /* 提示框 */
  .tooltip {
    background-color: var(--bg-tertiary);
    border-color: var(--border-color);
    color: var(--text-primary);
  }

  /* 通知 */
  .notification,
  .alert {
    background-color: var(--bg-card);
    border-color: var(--border-color);
    color: var(--text-primary);
  }

  .notification-success,
  .alert-success {
    background-color: rgba(50, 215, 75, 0.1);
    border-color: var(--success-color);
    color: var(--success-color);
  }

  .notification-warning,
  .alert-warning {
    background-color: rgba(255, 159, 10, 0.1);
    border-color: var(--warning-color);
    color: var(--warning-color);
  }

  .notification-error,
  .alert-error,
  .notification-danger,
  .alert-danger {
    background-color: rgba(255, 69, 58, 0.1);
    border-color: var(--danger-color);
    color: var(--danger-color);
  }

  .notification-info,
  .alert-info {
    background-color: rgba(100, 210, 255, 0.1);
    border-color: var(--info-color);
    color: var(--info-color);
  }

  /* ==================== 加载和进度 ==================== */

  /* 加载动画 */
  .loading,
  .spinner {
    color: var(--primary-color);
  }

  .loading-overlay {
    background-color: rgba(18, 18, 18, 0.8);
  }

  /* 进度条 */
  .progress {
    background-color: var(--bg-secondary);
  }

  .progress-bar {
    background-color: var(--primary-color);
  }

  /* ==================== 徽章和标签 ==================== */

  /* 徽章 */
  .badge {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
  }

  .badge-primary {
    background-color: var(--primary-color);
    color: #ffffff;
  }

  .badge-success {
    background-color: var(--success-color);
    color: #ffffff;
  }

  .badge-warning {
    background-color: var(--warning-color);
    color: #ffffff;
  }

  .badge-danger {
    background-color: var(--danger-color);
    color: #ffffff;
  }

  /* 标签 */
  .tag {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--border-color);
  }

  /* ==================== 代码和预格式化 ==================== */

  /* 代码块 */
  code {
    background-color: var(--bg-secondary);
    color: var(--primary-color);
    border-color: var(--border-color);
  }

  pre {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--border-color);
  }

  /* ==================== 滚动条 ==================== */

  /* Webkit 滚动条 */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background-color: var(--bg-secondary);
  }

  ::-webkit-scrollbar-thumb {
    background-color: var(--border-color);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: var(--border-light);
  }

  /* ==================== 特定页面组件 ==================== */

  /* Dashboard 仪表板 */
  .dashboard {
    background-color: var(--bg-primary);
  }

  .dashboard-card,
  .stat-card,
  .metric-card {
    background-color: var(--card-bg);
    border-color: var(--card-border);
    box-shadow: var(--card-shadow);
  }

  .stat-value,
  .metric-value {
    color: var(--text-primary);
  }

  .stat-label,
  .metric-label {
    color: var(--text-secondary);
  }

  /* Map 地图组件 */
  .map-container {
    background-color: var(--bg-card);
    border-color: var(--border-color);
  }

  .map-controls {
    background-color: var(--bg-card);
    border-color: var(--border-color);
    box-shadow: var(--shadow-md);
  }

  .map-popup,
  .map-tooltip {
    background-color: var(--bg-card);
    border-color: var(--border-color);
    color: var(--text-primary);
    box-shadow: var(--shadow-lg);
  }

  /* Task List 任务列表 */
  .task-list {
    background-color: var(--bg-card);
    border-color: var(--border-color);
  }

  .task-item {
    background-color: var(--bg-card);
    border-color: var(--border-color);
    color: var(--text-primary);
  }

  .task-item:hover {
    background-color: var(--bg-secondary);
  }

  .task-status {
    background-color: var(--bg-secondary);
    color: var(--text-secondary);
  }

  /* Monitor 监控面板 */
  .monitor-panel {
    background-color: var(--bg-card);
    border-color: var(--border-color);
  }

  .monitor-chart {
    background-color: var(--bg-card);
  }

  /* ==================== 确保没有白色背景泄漏 ==================== */

  /* 覆盖所有可能的白色背景 */
  div, section, article, aside, main, header, footer, nav {
    background-color: inherit;
  }

  /* 覆盖可能的浅色背景 */
  .bg-white,
  .bg-light,
  .bg-gray-100 {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  /* 文本颜色覆盖 */
  .text-dark,
  .text-black,
  .text-gray-900 {
    color: var(--text-primary) !important;
  }

  .text-muted,
  .text-secondary,
  .text-gray-500 {
    color: var(--text-secondary) !important;
  }

  /* ==================== 无障碍支持 ==================== */

  /* 焦点状态 */
  *:focus-visible {
    outline-color: var(--primary-color);
    outline-offset: 2px;
  }

  /* 选中文本 */
  ::selection {
    background-color: rgba(10, 132, 255, 0.3);
    color: var(--text-primary);
  }

  /* ==================== 动画过渡 ==================== */

  /* 平滑过渡 */
  *,
  *::before,
  *::after {
    transition-property: background-color, border-color, color, box-shadow;
    transition-duration: var(--transition-theme);
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* 禁用某些元素的过渡 */
  .no-transition,
  .no-transition * {
    transition: none !important;
  }
}
